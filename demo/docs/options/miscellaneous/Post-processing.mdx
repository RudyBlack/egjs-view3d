---
sidebar_position: 10
---
import PostProcessing from "@site/src/components/demo/PostProcessing";
import OptionDescriptor from "@site/src/components/OptionDescriptor";
import License from "@site/src/components/License";

<OptionDescriptor type="null | EffectComposerType " defaultVal="null"/>

Post-processing applies various effects to rendered scene.

[EffectComposer](https://threejs.org/docs/#examples/en/postprocessing/EffectComposer) has to be assigned to effectComposer of view3D.
Also, as you can use [Postprocessing](https://github.com/pmndrs/postprocessing) library, too.

First need to install by three or postprocessing.
```shell
npm install three
````
or
```shell
npm install postprocessing
````
```js
import View3D from "@egjs/view3d";

// It's EffectComposer of built-in three.js
import { EffectComposer } from "three/examples/jsm/postprocessing/EffectComposer";
// Or you can use EffectComposer of postprocessing library
import { EffectComposer } from "postprocessing";

const view3D = new View3D(...);

const effectComposer = new EffectComposer(...);
effectComposer.addPass(...);

...

view3D.effectComposer = effectComposer;
```
:::info
Post-processing of three.js and Post-processing of library cannot be mixed. Only one of the two can be used.
:::

### Before / After
<div className="columns">
  <div className="column is-6">
    <PostProcessing src={"/egjs-view3d/model/draco/alarm.glb"} type="alarm" setPostProcessing={false} initZoom={4}/>
  </div>
  <div className="column is-6">
    <PostProcessing src={"/egjs-view3d/model/draco/alarm.glb"} type="alarm" initZoom={4}/>
  </div>
</div>

<div className="columns">
  <div className="column is-6">
    <PostProcessing src={"/egjs-view3d/model/lamborghini.glb"} setPostProcessing={false}/>
  </div>
  <div className="column is-6">
    <PostProcessing src={"/egjs-view3d/model/lamborghini.glb"} type={"car"}/>
  </div>
</div>


### Example
<PostProcessing src={"/egjs-view3d/model/draco/alarm.glb"} type="alarm" initZoom={3}/>

```js
import { EffectComposer } from "three/examples/jsm/postprocessing/EffectComposer";

const view3D = new View3D(...);

const camera = view3D.camera.threeCamera;
const renderer = view3D.renderer.threeRenderer;
const scene = view3D.scene.root;

const effectComposer = new EffectComposer(renderer);

view3D.on("ready", () => {

  const ssr = new SSRPass({renderer, scene, camera, selects: view3D.model.meshes, groundReflector: null});
  const gammaCorrectionPass = new ShaderPass(GammaCorrectionShader);

  effectComposer.addPass(new RenderPass(scene, camera));
  effectComposer.addPass(ssr);
  effectComposer.addPass(gammaCorrectionPass);

  view3D.effectComposer = effectComposer;

});
```

<License items={[
  {
    name: "Alarm Clock 01",
    link: "https://polyhaven.com/a/alarm_clock_01",
    author: "Poly Haven",
    authorLink: "https://polyhaven.com/",
    license: "CC0"
  },
  {
    name: "Lamborghini Terzo Millennio",
    link: "https://sketchfab.com/3d-models/free-lamborghini-terzo-millennio-7ad3dffa9d344c3c978eafcc220cb709",
    author: "SDC PERFORMANCE™️",
    authorLink: "https://sketchfab.com/3Duae",
    license: "Creative Commons Attribution"
  }
]}/>
